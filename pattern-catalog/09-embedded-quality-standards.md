# Embedded Quality Standards

**分类**：质量模式
**必要性**：推荐

## 问题

如何确保AI Agent产出高质量的结果？

传统软件测试依赖于确定性：相同输入应产生相同输出，可以用断言验证。但AI Agent的输出具有语义性质（如"报告应当客观专业"），且执行路径不完全确定。如何在这种情况下保障质量？

## 语境

该模式适用于以下场景：

- Agent产出的质量标准难以用规则精确定义
- 质量标准具有语义性质（需要理解才能判断）
- 希望AI在执行过程中就关注质量，而非事后补救
- 需要将隐性的质量期望显式化

## 作用力

- **灵活性 vs 约束力**：标准太严格限制灵活性，太宽松无法保证质量
- **全面性 vs 可执行性**：标准太全面难以执行，太简单可能遗漏
- **主观性 vs 客观性**：质量判断天然有主观成分
- **执行效率 vs 检查深度**：深度检查耗时，但质量更有保障

## 解决方案

**将质量标准直接嵌入Agent Blueprint，使AI在执行过程中持续参照标准自检，而非事后检查。**

### 质量标准的层次

```
标准层次：
├── 格式标准：输出格式、文件结构、命名规范
│   └── 例：使用Markdown格式，一级标题仅一个
│
├── 内容标准：必须包含的内容、禁止的内容
│   └── 例：每个论点必须有数据支撑
│
├── 风格标准：语言风格、表述规范
│   └── 例：使用客观中性的学术语言
│
└── 质量标准：可信度、完整性、一致性
    └── 例：关键数据需要交叉验证
```

### 在Blueprint中嵌入标准

```markdown
## 质量要求

### 格式要求
- 使用Markdown格式
- 标题层级不超过三级
- 代码块标注语言类型

### 内容要求
- 每个论点必须有数据或案例支撑
- 引用必须标注来源
- 不得包含未经验证的推测

### 风格要求
- 使用客观、中性的学术语言
- 避免主观评价词汇
- 保持前后术语一致

### 完成标准
- [ ] 所有必填字段已填写
- [ ] 所有引用已标注来源
- [ ] 已进行格式检查
```

## 结果

### 收益

- **质量前置**：在生成过程中就保证质量，而非事后修补
- **标准显式化**：隐性的质量期望变为显式的检查项
- **AI可执行**：自然语言描述的标准AI可以理解和执行
- **一致性提高**：所有Agent遵循相同标准
- **便于沟通**：质量期望对人类和AI都清晰

### 代价

- **Blueprint复杂化**：需要详细描述质量标准
- **执行开销**：自检过程消耗时间和token
- **标准维护成本**：标准需要随实践演进
- **非完美保障**：AI可能误判或遗漏

## 实现指南

### 质量标准的四个维度

**1. 数据质量标准**
```markdown
### 数据采集标准

**来源可信度**：
- 优先使用：学术论文、官方政策文件、权威机构报告
- 谨慎使用：新闻报道、企业公告
- 避免使用：个人博客、自媒体、未标注来源的内容

**数据时效性**：
- 优先采集：近5年内的数据
- 历史数据：仅用于背景说明
- 标注要求：所有数据标注发布时间

**数据验证**：
- 关键数据需要交叉验证（至少2个独立来源）
- 存在矛盾时如实记录不同说法
```

**2. 分析质量标准**
```markdown
### 分析标准

**论据充分**：
- 每个论点必须有具体数据或案例支撑
- 避免"可能"、"或许"等模糊表述
- 明确区分"事实"和"推断"

**逻辑严密**：
- 因果关系要清晰
- 避免跳跃性结论
- 承认局限性和不确定性

**客观公正**：
- 呈现多方观点
- 既看到成就也看到问题
- 避免一边倒的倾向性
```

**3. 输出格式标准**
```markdown
### 格式标准

**文档结构**：
- 使用清晰的层级标题
- 长文档需要目录
- 使用列表和表格提高可读性

**引用格式**：
- 格式：[来源名称](URL)
- 直接引用使用引用块 >
- 关键数据标注具体来源位置

**文件命名**：
- 使用小写字母和下划线
- 名称应具有自描述性
- 遵循项目约定的命名规范
```

**4. 完整性检查清单**
```markdown
### 完成标准

在提交输出前，确认以下检查项：

- [ ] 所有必填内容已完成
- [ ] 所有数据已标注来源
- [ ] 格式符合规范要求
- [ ] 无明显的语法错误
- [ ] 逻辑连贯，无矛盾之处
- [ ] 文件已写入正确位置
```

### 分级质量标准

对于不同重要性的内容，可以应用不同级别的标准：

```markdown
### 质量分级

**关键内容**（必须满足）：
- 核心论点有多源证据支撑
- 关键数据经过交叉验证
- 符合所有格式规范

**重要内容**（应当满足）：
- 论点有证据支撑
- 数据来源明确
- 符合基本格式规范

**辅助内容**（建议满足）：
- 有支撑性说明
- 来源清晰
- 格式基本规范
```

## 示例

### 来自 industry_assessment 系统

**数据采集质量标准（Initial Scanner）**：
```markdown
## 数据采集原则

### 全面性
- 产业概况要覆盖所有四个方面
- 问题清单要覆盖所有55个功能项

### 准确性
- 优先选择高可信度来源
- 关键数据要交叉验证
- 准确记录来源信息

### 可追溯性
- 所有数据必须有明确来源
- URL必须完整有效
- 记录采集时间

### 客观性
- 不预设立场
- 如实记录，不加主观解读
```

**分析质量标准（Analyzer）**：
```markdown
## 分析质量要求

### 论据充分
- 每个论点都要有数据或案例支撑
- 避免空洞的描述和无依据的判断
- 数据要注明来源

### 逻辑严密
- 论点、论据、论证要环环相扣
- 避免跳跃性结论
- 因果关系要清晰

### 客观公正
- 既要看到成就，也要看到问题
- 避免一边倒的倾向性表述
- 对争议性问题呈现多种观点

### 可追溯
- 所有论据都能追溯到原始资料
- 关键引用要注明具体来源和位置
```

**单条数据记录的质量字段**：
```markdown
## [数据标题]

**来源类型**：[学术文章/政策文件/行业研报/新闻报道/...]
**来源URL**：[完整URL]
**采集时间**：[YYYY-MM-DD]
**发布时间**：[原文发布时间]
**可信度评估**：[高/中高/中/低]
**核心内容摘要**：[...]
**原文关键引用**：> [...]
```

## 相关模式

- **[Prompt-Defined Agent](./01-prompt-defined-agent.md)**：质量标准嵌入Blueprint
- **[Reference Data Configuration](./03-reference-data-configuration.md)**：详细的质量规范可外置为Reference Data
- **[Layered Quality Assurance](./10-layered-quality-assurance.md)**：多层质量保障的基础

## 变体

### 分领域标准
不同类型的Agent有专门的质量标准集：
- 采集Agent：来源可信度、时效性、完整性
- 分析Agent：论据充分、逻辑严密、客观公正
- 报告Agent：格式规范、语言风格、结构完整

### 动态标准
根据任务重要性或类型动态选择标准级别：
- 关键报告：应用最严格标准
- 中期草稿：应用基本标准
- 探索性任务：应用宽松标准

### 外部标准引用
质量标准作为Reference Data外置，Blueprint引用：
```markdown
## 质量要求

请参照 `references/quality-standards.md` 中的标准执行。
```
